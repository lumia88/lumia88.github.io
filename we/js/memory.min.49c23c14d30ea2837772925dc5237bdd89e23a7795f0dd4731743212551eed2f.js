'use strict';function getDiff(c,d){let a={y:c.getFullYear(),m:c.getMonth()+1,d:c.getDate(),t:c.getTime()},b={y:d.getFullYear(),m:d.getMonth()+1,d:d.getDate(),t:d.getTime()};return function(d){let c='';switch(d){case'YYYY':c=b.y-a.y,b.m<a.m&&c--;break;case'MM':b.m<a.m?c=b.m-a.m+(b.y-a.y)*12:c=b.m-a.m+(b.y-a.y+1)*12,b.d<a.d&&c--;break;case'DD':c=Math.floor((b.t-a.t)/(1e3*60*60*24))+2;break;case'Mm':b.m<a.m?c=b.m-a.m+12:c=b.m-a.m,b.d<a.d&&c--;break;case'dd':c=b.d-a.d;break;case'hh':c=Math.floor((b.t-a.t)/(1e3*60*60))%24;break;case'mm':c=Math.floor((b.t-a.t)/(1e3*60))%60;break;case'ss':c=Math.floor((b.t-a.t)/1e3)%60;break;default:break}return c<10?'0'+c:c}}function Memory(b){let a=this;return a.init(b),a}Memory.prototype.init=function(b){let a=this;if(a.config=b,typeof document=='undefined'){console&&console.warn('Failed to install Memory');return}return!!b&&a._init(),a},Memory.prototype._init=function(){let a=this;a.timerTask=null,a.el=null;let{el:d,start:e,template:c,delay:b}=a.config;if(!d)throw new Error('must bind a dom element!');if(!e)throw new Error('must set start time');const f=d.replace('#','');a.el=document.getElementById(f),b=Number(b),(!b||isNaN(b))&&(b=500),c||(c='第YYYY年MM月DD天，hh时mm分ss秒'),a.config.delay=b,a.config.template=c,window.onload=function(){a.render()},window.onbeforeunload=function(){a.destroy()}},Memory.prototype.render=function(g){let a=g||this,{start:i,template:d,delay:f,tag:e='i'}=a.config,b=a.el,h=new Date(i);const c=()=>{let a=new Date,c=getDiff(h,a),f=d.replace(/(YYYY|MM|DD|Mm|dd|hh|mm|ss)/g,function(){return'<'+e+'>'+c(arguments[0])+'</'+e+'>'});b.innerHTML=f};b?/(hh|mm|ss)/.test(d)?a.timerTask=setInterval(c,f):c():console&&console.warn('Could not found dom to mount')},Memory.prototype.destroy=function(){let a=this;a&&a.timerTask&&clearInterval(a.timerTask)},Window.Memory=Memory