"use strict";function getDiff(e,t){let n={y:e.getFullYear(),m:e.getMonth()+1,d:e.getDate(),t:e.getTime()},s={y:t.getFullYear(),m:t.getMonth()+1,d:t.getDate(),t:t.getTime()};return function(e){let t="";switch(e){case"YYYY":t=s.y-n.y,s.m<n.m&&t--;break;case"MM":s.m<n.m?t=s.m-n.m+(s.y-n.y)*12:t=s.m-n.m+(s.y-n.y+1)*12,s.d<n.d&&t--;break;case"DD":t=Math.floor((s.t-n.t)/(1e3*60*60*24))+2;break;case"Mm":s.m<n.m?t=s.m-n.m+12:t=s.m-n.m,s.d<n.d&&t--;break;case"dd":t=s.d-n.d;break;case"hh":t=Math.floor((s.t-n.t)/(1e3*60*60))%24;break;case"mm":t=Math.floor((s.t-n.t)/(1e3*60))%60;break;case"ss":t=Math.floor((s.t-n.t)/1e3)%60;break;default:break}return t}}function Memory(e){let t=this;return t.init(e),t}Memory.prototype.init=function(e){let t=this;if(t.config=e,typeof document=="undefined"){console&&console.warn("Failed to install Memory");return}return!!e&&t._init(),t},Memory.prototype._init=function(){let e=this;e.timerTask=null,e.el=null;let{el:s,start:o,template:n,delay:t}=e.config;if(!s)throw new Error("must bind a dom element!");if(!o)throw new Error("must set start time");const i=s.replace("#","");e.el=document.getElementById(i),t=Number(t),(!t||isNaN(t))&&(t=500),n||(n="第YYYY年MM月DD天，hh时mm分ss秒"),e.config.delay=t,e.config.template=n,document.addEventListener("DOMContentLoaded",function(){e.render()}),document.addEventListener("beforeunload",function(){e.destroy()})},Memory.prototype.render=function(e){let t=e||this,{start:a,template:n,delay:r,tag:s="i"}=t.config,o=t.el,c=new Date(a);const i=()=>{let e=new Date,t=getDiff(c,e),i=n.replace(/(YYYY|MM|DD|Mm|dd|hh|mm|ss)/g,function(){return"<"+s+">"+t(arguments[0])+"</"+s+">"});o.innerHTML=i};o?/(hh|mm|ss)/.test(n)?t.timerTask=setInterval(i,r):i():console&&console.warn("Could not found dom to mount")},Memory.prototype.destroy=function(){let e=this;e&&e.timerTask&&clearInterval(e.timerTask)}